<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strata Integration Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #000;
        }
        #root {
            width: 100%;
            height: 100%;
        }
        canvas {
            display: block;
        }
        #status {
            position: fixed;
            top: 10px;
            left: 10px;
            color: white;
            font-family: monospace;
            font-size: 12px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    <div id="status">Loading...</div>

    <script type="importmap">
    {
        "imports": {
            "react": "https://esm.sh/react@18.2.0",
            "react/jsx-runtime": "https://esm.sh/react@18.2.0/jsx-runtime",
            "react-dom": "https://esm.sh/react-dom@18.2.0",
            "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
            "@react-three/fiber": "https://esm.sh/@react-three/fiber@8.15.0?external=react,react-dom,three",
            "@react-three/drei": "https://esm.sh/@react-three/drei@9.114.0?external=react,three,@react-three/fiber",
            "@react-three/postprocessing": "https://esm.sh/@react-three/postprocessing@3.0.0?external=react,three,@react-three/fiber,postprocessing",
            "@react-three/rapier": "https://esm.sh/@react-three/rapier@2.0.0?external=react,three,@react-three/fiber",
            "three": "https://esm.sh/three@0.160.0",
            "postprocessing": "https://esm.sh/postprocessing@6.0.0?external=three",
            "yuka": "https://esm.sh/yuka@0.7.8",
            "howler": "https://esm.sh/howler@2.2.4",
            "zustand": "https://esm.sh/zustand@5.0.0?external=react",
            "immer": "https://esm.sh/immer@11.0.0",
            "leva": "https://esm.sh/leva@0.10.1?external=react",
            "maath": "https://esm.sh/maath@0.6.0?external=three",
            "miniplex": "https://esm.sh/miniplex@2.0.0",
            "miniplex-react": "https://esm.sh/miniplex-react@2.0.0?external=react,miniplex",
            "simplex-noise": "https://esm.sh/simplex-noise@4.0.3",
            "tunnel-rat": "https://esm.sh/tunnel-rat@0.1.2?external=react",
            "xstate": "https://esm.sh/xstate@5.15.0",
            "@xstate/react": "https://esm.sh/@xstate/react@5.0.0?external=react,xstate",
            "zundo": "https://esm.sh/zundo@2.3.0?external=zustand",
            "ngraph.graph": "https://esm.sh/ngraph.graph@20.0.1",
            "ngraph.path": "https://esm.sh/ngraph.path@1.6.1"
        }
    }
    </script>

    <script type="module">
        // Make test status available
        window.testStatus = {
            ready: false,
            error: null,
            testResults: {}
        };

        // Update status display
        function updateStatus(message) {
            const statusEl = document.getElementById('status');
            if (statusEl) {
                statusEl.textContent = message;
            }
        }

        // Signal ready state
        window.signalReady = function() {
            window.testStatus.ready = true;
            updateStatus('Ready for testing');
        };

        // Handle errors
        window.addEventListener('error', (e) => {
            window.testStatus.error = e.message;
            updateStatus('Error: ' + e.message);
        });

        updateStatus('Initialized');
    </script>
</body>
</html>
